
  <!DOCTYPE html>
  <html>
    <head>
      <title>generate-teams.test.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="..\..\..\..\..\assets\source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="..\..\..\..\..\assets\source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="..\..\..\..\..\index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">app\service\__test__\generate-tems\generate-teams.test.ts</td><td class="">100.00%</td><td class="">80%</td><td class="">248</td><td class="">248</td><td class="">0</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import { getMaxIndex, useRigthCondition } from &#x27;../../generate-teams&#x27;;
import { deleteFromArrayAfterPush } from &#x27;../../generate-teams&#x27;;
import { getTeamValue } from &#x27;../../generate-teams&#x27;;
import { getPlayerObject } from &#x27;../../generate-teams&#x27;;
import { divideInTeam } from &#x27;../../generate-teams&#x27;;
import { assignTeam } from &#x27;../../generate-teams&#x27;;

describe(&#x27;assignTeam&#x27;, () =&gt; {
  test(&#x27;should return a number&#x27;, () =&gt; {
    expect(typeof assignTeam(1, 10)).toBe(&#x27;number&#x27;);
  });
  test(&#x27;should return 1 if inferior to 5&#x27;, () =&gt; {
    expect(assignTeam(1, 10)).toBe(1);
    expect(assignTeam(4, 10)).toBe(1);
  });
  test(&#x27;should return 2 if superior to 5&#x27;, () =&gt; {
    expect(assignTeam(5, 10)).toBe(2);
    expect(assignTeam(9, 10)).toBe(2);
  });
  test(&#x27;should return 2 if equal to 5&#x27;, () =&gt; {
    expect(assignTeam(5, 10)).toBe(2);
  });
});

describe(&#x27;useRigthCondition&#x27;, () =&gt; {
  afterEach(() =&gt; {
    vi.restoreAllMocks();
  });

  const mockConditions = {
    random: vi.fn(),
    regular: vi.fn(),
    ifZero: vi.fn(),
  };

  test(`should call random condition if 
    participant is equal of length [ids]`, () =&gt; {
    const mockConfig = {
      team1: [{ gb_rating: 1, profile_id: 2 }],
      team2: [{ gb_rating: 2, profile_id: 1 }],
      ids: [1, 2, 3],
      values: [1, 2, 3],
      participants: 3,
    };

    const mockPlayer = {
      profile_id: 1,
      gb_rating: 1,
    };

    const mockValueTeam1 = 1;
    const mockValueTeam2 = 2;
    useRigthCondition(
      mockConfig,
      mockPlayer,
      mockValueTeam1,
      mockValueTeam2,
      mockConditions,
    );
    expect(mockConditions.random).toHaveBeenCalled();
  });
  test(&#x27;should call random condition ifZero if player have 0 as rating&#x27;, () =&gt; {
    const mockConfig = {
      team1: [{ gb_rating: 1, profile_id: 2 }],
      team2: [{ gb_rating: 2, profile_id: 1 }],
      ids: [1, 2, 3],
      values: [1, 2, 3],
      participants: 7,
    };

    const mockPlayer = {
      profile_id: 1,
      gb_rating: 0,
    };

    const mockValueTeam1 = 1;
    const mockValueTeam2 = 2;
    useRigthCondition(
      mockConfig,
      mockPlayer,
      mockValueTeam1,
      mockValueTeam2,
      mockConditions,
    );
    expect(mockConditions.ifZero).toHaveBeenCalled();
    expect(mockConditions.ifZero).toHaveBeenCalledWith(
      mockConfig.team1.length,
      mockConfig.team2.length,
    );
  });
  test(&#x27;should call regular condition&#x27;, () =&gt; {
    const mockConfig = {
      team1: [
        { gb_rating: 2, profile_id: 2 },
        { gb_rating: 23, profile_id: 3 },
      ],
      team2: [{ gb_rating: 22, profile_id: 1 }],
      ids: [4, 5, 6],
      values: [10, 7, 8],
      participants: 6,
    };

    const mockPlayer = {
      profile_id: 4,
      gb_rating: 10,
    };

    const mockValueTeam1 = 1;
    const mockValueTeam2 = 2;
    useRigthCondition(
      mockConfig,
      mockPlayer,
      mockValueTeam1,
      mockValueTeam2,
      mockConditions,
    );
    expect(mockConditions.regular).toHaveBeenCalled();
    expect(mockConditions.regular).toHaveBeenCalledWith(
      mockValueTeam1,
      mockValueTeam2,
    );
  });
});

describe(&#x27;getMaxIndex&#x27;, () =&gt; {
  test(&#x27;should return the index of the max value&#x27;, () =&gt; {
    expect(typeof getMaxIndex([1, 2, 3])).toBe(&#x27;number&#x27;);
    expect(getMaxIndex([1, 2, 3])).toStrictEqual(2);
    expect(getMaxIndex([3, 3, 2])).toEqual(0);
    expect(getMaxIndex([1, 4, 6, 7, 5])).toEqual(3);
  });
});

describe(&#x27;deleteFromArrayAfterPush&#x27;, () =&gt; {
  test(&#x27;should delete the index from the array&#x27;, () =&gt; {
    const mockIds = [1, 2, 3];
    const mockValues = [1, 2, 3];
    const mockIndex = 0;
    deleteFromArrayAfterPush(mockIds, mockValues, mockIndex);
    expect(mockIds).toEqual([2, 3]);
    expect(mockValues).toEqual([2, 3]);
  });
});

describe(&#x27;getTeamValue&#x27;, () =&gt; {
  const mockTeams = [
    { gb_rating: 1, profile_id: 2 },
    { gb_rating: 2, profile_id: 1 },
  ];
  test(&#x27;should return the sum of the gb_rating of each player&#x27;, () =&gt; {
    expect(typeof getTeamValue(mockTeams)).toBe(&#x27;number&#x27;);
    expect(getTeamValue(mockTeams)).toBe(3);
  });
});

describe(&#x27;getPlayerObject&#x27;, () =&gt; {
  test(&#x27;should return an object with the profile_id and gb_rating&#x27;, () =&gt; {
    const result = getPlayerObject(0, [1, 2, 3], [1, 2, 3]);

    expect(typeof result).toBe(&#x27;object&#x27;);
    expect(result).toEqual({
      profile_id: 1,
      gb_rating: 1,
    });
  });
});

describe(&#x27;divideInTeam&#x27;, () =&gt; {
  test(&#x27;should return an object with the two teams&#x27;, () =&gt; {
    const mockConfig = {
      team1: [{ gb_rating: 1, profile_id: 2 }],
      team2: [{ gb_rating: 2, profile_id: 1 }],
      ids: [3, 4, 5, 6],
      values: [1, 2, 3, 8],
      participants: 6,
    };
    expect(typeof divideInTeam(mockConfig)).toBe(&#x27;object&#x27;);
    expect(divideInTeam(mockConfig)).toHaveProperty(&#x27;team1&#x27;);
    expect(divideInTeam(mockConfig)).toHaveProperty(&#x27;team2&#x27;);
  });
  test(&#x27;should return an object with the two of same length&#x27;, () =&gt; {
    const mockConfig = {
      team1: [],
      team2: [],
      ids: [1, 2, 3, 4, 5, 6],
      values: [25, 13, 47, 33, 12, 1],
      participants: 6,
    };
    const result = divideInTeam(mockConfig);
    expect(result.team1.length).toBe(3);
    expect(result.team2.length).toBe(3);
    expect(result.team1.length).toBe(result.team2.length);
  });
});
</textarea><pre id="annotations" style="display:none">[]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 04 Jan 2024 18:32:37 GMT</p>
    </body>
  </html>
  